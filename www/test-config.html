<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de Configura√ß√£o</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            padding: 20px;
            background: #1e1e1e;
            color: #d4d4d4;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .success {
            background: #0e4c1e;
            color: #7cfc00;
        }
        .error {
            background: #4c0e0e;
            color: #ff6b6b;
        }
        .info {
            background: #1e3a4c;
            color: #6bb6ff;
        }
        pre {
            background: #2d2d2d;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        button {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        .btn-success {
            background: #28a745;
            color: white;
        }
        .btn-info {
            background: #17a2b8;
            color: white;
        }
    </style>
</head>
<body>
    <h1>üß™ Teste de Configura√ß√£o - config.js</h1>
    
    <div id="status"></div>
    
    <h2>A√ß√µes de Teste:</h2>
    <button class="btn-success" onclick="testConfigObject()">1. Verificar CONFIG</button>
    <button class="btn-info" onclick="testDebugFunction()">2. Testar CONFIG.debug()</button>
    <button class="btn-info" onclick="testAllProperties()">3. Verificar Propriedades</button>
    <button class="btn-info" onclick="testEnvironment()">4. Testar Ambiente</button>
    
    <h2>Console Output:</h2>
    <pre id="output">Aguardando testes...</pre>
    
    <!-- CARREGA O CONFIG.JS -->
    <script src="js/config.js"></script>
    
    <script>
        const output = document.getElementById('output');
        const statusDiv = document.getElementById('status');
        
        function log(message, type = 'info') {
            const now = new Date().toLocaleTimeString();
            output.innerHTML += `[${now}] ${message}\n`;
            console.log(message);
        }
        
        function showStatus(message, isSuccess) {
            statusDiv.innerHTML = `<div class="status ${isSuccess ? 'success' : 'error'}">${message}</div>`;
        }
        
        // Teste autom√°tico ao carregar
        window.addEventListener('DOMContentLoaded', () => {
            log('='.repeat(60));
            log('üîç INICIANDO TESTES AUTOM√ÅTICOS');
            log('='.repeat(60));
            
            // Teste 1: CONFIG existe?
            if (typeof CONFIG === 'undefined') {
                log('‚ùå ERRO: Objeto CONFIG n√£o encontrado!', 'error');
                showStatus('‚ùå ERRO: config.js n√£o foi carregado corretamente!', false);
                return;
            }
            
            log('‚úÖ Objeto CONFIG encontrado!', 'success');
            
            // Teste 2: CONFIG.debug existe?
            if (typeof CONFIG.debug === 'function') {
                log('‚úÖ Fun√ß√£o CONFIG.debug() encontrada!', 'success');
                showStatus('‚úÖ Configura√ß√£o carregada com sucesso!', true);
            } else {
                log('‚ùå ERRO: CONFIG.debug n√£o √© uma fun√ß√£o!', 'error');
                log(`   Tipo de CONFIG.debug: ${typeof CONFIG.debug}`, 'error');
                showStatus('‚ö†Ô∏è AVISO: CONFIG carregado, mas debug() n√£o encontrado!', false);
            }
            
            // Teste 3: Listar propriedades
            log('\nüìã Propriedades do CONFIG:');
            for (let key in CONFIG) {
                log(`   - ${key}: ${typeof CONFIG[key] === 'function' ? '[Function]' : CONFIG[key]}`);
            }
            
            log('\n‚úÖ Testes autom√°ticos conclu√≠dos!');
        });
        
        function testConfigObject() {
            output.innerHTML = '';
            log('üîç Teste 1: Verificando objeto CONFIG...\n');
            
            if (typeof CONFIG === 'undefined') {
                log('‚ùå FALHA: CONFIG n√£o est√° definido!');
                showStatus('‚ùå config.js n√£o foi carregado!', false);
                return;
            }
            
            log('‚úÖ SUCESSO: CONFIG est√° definido!');
            log(`   Tipo: ${typeof CONFIG}`);
            log(`   √â objeto: ${typeof CONFIG === 'object'}`);
            showStatus('‚úÖ CONFIG carregado corretamente!', true);
        }
        
        function testDebugFunction() {
            output.innerHTML = '';
            log('üîç Teste 2: Testando CONFIG.debug()...\n');
            
            if (typeof CONFIG === 'undefined') {
                log('‚ùå FALHA: CONFIG n√£o est√° definido!');
                showStatus('‚ùå Carregue config.js primeiro!', false);
                return;
            }
            
            if (typeof CONFIG.debug !== 'function') {
                log('‚ùå FALHA: CONFIG.debug n√£o √© uma fun√ß√£o!');
                log(`   Tipo atual: ${typeof CONFIG.debug}`);
                showStatus('‚ùå debug() n√£o encontrado!', false);
                return;
            }
            
            log('‚úÖ CONFIG.debug() √© uma fun√ß√£o!');
            log('\nüìä Executando CONFIG.debug()...\n');
            
            try {
                CONFIG.debug();
                log('\n‚úÖ CONFIG.debug() executado com sucesso!');
                showStatus('‚úÖ Fun√ß√£o debug() funcionando!', true);
            } catch (error) {
                log(`‚ùå ERRO ao executar: ${error.message}`);
                showStatus('‚ùå Erro ao executar debug()!', false);
            }
        }
        
        function testAllProperties() {
            output.innerHTML = '';
            log('üîç Teste 3: Verificando todas as propriedades...\n');
            
            if (typeof CONFIG === 'undefined') {
                log('‚ùå FALHA: CONFIG n√£o est√° definido!');
                return;
            }
            
            const expectedProps = [
                'BASE_URL',
                'API_URL',
                'BIBLE_API_URL',
                'AUTH_URL',
                'USER_API_URL',
                'PROGRESS_API_URL',
                'HIGHLIGHTS_API_URL',
                'CHAPTERS_API_URL',
                'NOTES_API_URL',
                'STATS_API_URL',
                'DEVOTIONAL_API_URL',
                'ENVIRONMENT',
                'IS_NATIVE',
                'IS_DEVELOPMENT',
                'IS_STAGING',
                'IS_PRODUCTION',
                'VERSION',
                'debug'
            ];
            
            let missing = [];
            let found = [];
            
            expectedProps.forEach(prop => {
                if (CONFIG.hasOwnProperty(prop)) {
                    found.push(prop);
                    const value = typeof CONFIG[prop] === 'function' ? '[Function]' : CONFIG[prop];
                    log(`‚úÖ ${prop}: ${value}`);
                } else {
                    missing.push(prop);
                    log(`‚ùå ${prop}: N√ÉO ENCONTRADO`);
                }
            });
            
            log(`\nüìä Resultado:`);
            log(`   Encontrados: ${found.length}/${expectedProps.length}`);
            log(`   Faltando: ${missing.length}`);
            
            if (missing.length > 0) {
                log(`   Propriedades faltando: ${missing.join(', ')}`);
                showStatus(`‚ö†Ô∏è ${missing.length} propriedades faltando!`, false);
            } else {
                log(`\n‚úÖ Todas as propriedades encontradas!`);
                showStatus('‚úÖ CONFIG completo!', true);
            }
        }
        
        function testEnvironment() {
            output.innerHTML = '';
            log('üîç Teste 4: Verificando detec√ß√£o de ambiente...\n');
            
            if (typeof CONFIG === 'undefined') {
                log('‚ùå FALHA: CONFIG n√£o est√° definido!');
                return;
            }
            
            log('üìä Informa√ß√µes do Ambiente:');
            log(`   window.location.hostname: ${window.location.hostname}`);
            log(`   window.location.protocol: ${window.location.protocol}`);
            log(`   window.location.origin: ${window.location.origin}`);
            log(`   window.Capacitor: ${typeof window.Capacitor}`);
            
            log('\nüìä Configura√ß√£o Detectada:');
            log(`   BASE_URL: ${CONFIG.BASE_URL}`);
            log(`   ENVIRONMENT: ${CONFIG.ENVIRONMENT}`);
            log(`   IS_NATIVE: ${CONFIG.IS_NATIVE}`);
            log(`   IS_DEVELOPMENT: ${CONFIG.IS_DEVELOPMENT}`);
            log(`   IS_STAGING: ${CONFIG.IS_STAGING}`);
            log(`   IS_PRODUCTION: ${CONFIG.IS_PRODUCTION}`);
            
            log('\n‚úÖ Teste de ambiente conclu√≠do!');
            showStatus('‚úÖ Ambiente detectado corretamente!', true);
        }
    </script>
</body>
</html>
